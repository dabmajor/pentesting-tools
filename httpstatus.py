import http.client
import requests
from bs4 import BeautifulSoup


def main():
    host = input("Host/IP: ")
    port = input("TCP Port(80): ")
    url = input("URL(/): ")
    full_uri = host + url

    if port == "":
        port = 80

    try:
        if port == 443:
            connection = http.client.HTTPSConnection(host, port)
        else:
            connection = http.client.HTTPConnection(host, port)
        connection.request('GET', url)
        response = connection.getresponse()
        print("Server Response: ", response.status)
        server_info = get_server_info(full_uri)
        for info in server_info:
            print("*************************************************************************")
            print(info)
        connection.close()
    except ConnectionRefusedError:
        print("Connection Refused")


def get_server_info(full_uri):
    response = requests.get('http://{0}'.format(full_uri))
    purdy = BeautifulSoup(response.text, 'html.parser').prettify()
    server_info = [response, response.headers.get('server'), response.headers, purdy]
    return server_info


if __name__ == "__main__":
    main()
